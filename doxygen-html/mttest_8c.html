<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>openssl: crypto/threads/mttest.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">openssl
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_53403d93963d3f5d2fcffd0698f5bddb.html">crypto</a></li><li class="navelem"><a class="el" href="dir_1693190734e01eb95e73127c4b06ad92.html">threads</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mttest.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;openssl/lhash.h&gt;</code><br/>
<code>#include &lt;openssl/crypto.h&gt;</code><br/>
<code>#include &lt;openssl/buffer.h&gt;</code><br/>
<code>#include &quot;../../e_os.h&quot;</code><br/>
<code>#include &lt;openssl/x509.h&gt;</code><br/>
<code>#include &lt;openssl/ssl.h&gt;</code><br/>
<code>#include &lt;openssl/err.h&gt;</code><br/>
<code>#include &lt;openssl/rand.h&gt;</code><br/>
</div>
<p><a href="mttest_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a73c8b76941fd149157f3b5bd1bac0fe8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a73c8b76941fd149157f3b5bd1bac0fe8">TEST_SERVER_CERT</a>&#160;&#160;&#160;&quot;../../apps/server.pem&quot;</td></tr>
<tr class="memitem:aa97427fae9f41dc0c45ea080a94f194a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#aa97427fae9f41dc0c45ea080a94f194a">TEST_CLIENT_CERT</a>&#160;&#160;&#160;&quot;../../apps/client.pem&quot;</td></tr>
<tr class="memitem:a3ccd9d8970c512a88885abbf5d71c6e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a3ccd9d8970c512a88885abbf5d71c6e0">MAX_THREAD_NUMBER</a>&#160;&#160;&#160;100</td></tr>
<tr class="memitem:ae423f73e281c4ae253c7894532ce3276"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ae423f73e281c4ae253c7894532ce3276">W_READ</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:a4a4c8e2d9accdce696a8cc5ea111f6ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a4a4c8e2d9accdce696a8cc5ea111f6ae">W_WRITE</a>&#160;&#160;&#160;2</td></tr>
<tr class="memitem:ad0902f8ffbb42de52c29eeb49d9feb79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ad0902f8ffbb42de52c29eeb49d9feb79">C_DONE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:aab10c0491d9394742cfc4d3678f3df9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#aab10c0491d9394742cfc4d3678f3df9d">S_DONE</a>&#160;&#160;&#160;2</td></tr>
<tr class="memitem:a90b7a8cb7bc3fdbd98014a3e15ee6e9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a90b7a8cb7bc3fdbd98014a3e15ee6e9a">THREAD_STACK_SIZE</a>&#160;&#160;&#160;(16*1024)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac0ab5d16914b8b8094ce1e47254e57d5"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="ecdhtest_8c.html#a9bf82f2bf6a77e81125eeaa7ee405322">MS_CALLBACK</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ac0ab5d16914b8b8094ce1e47254e57d5">verify_callback</a> (int ok, <a class="el" href="ossl__typ_8h.html#ae681945a2cf88d6337137dc0260a1545">X509_STORE_CTX</a> *xs)</td></tr>
<tr class="memitem:a970ba88e9a098add36d0f4eb5b7583b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a970ba88e9a098add36d0f4eb5b7583b6">thread_setup</a> (void)</td></tr>
<tr class="memitem:a16fa70526b1e82066ff7fc24595019d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a16fa70526b1e82066ff7fc24595019d1">thread_cleanup</a> (void)</td></tr>
<tr class="memitem:af39c30a981df36b29206d93224c12dc1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#af39c30a981df36b29206d93224c12dc1">do_threads</a> (<a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *s_ctx, <a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *c_ctx)</td></tr>
<tr class="memitem:ad3ec08c233542c8d4720c326e472c69c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ad3ec08c233542c8d4720c326e472c69c">irix_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:a2f6ea939906b88c77d91c01fb2f0e8fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a2f6ea939906b88c77d91c01fb2f0e8fe">solaris_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:a1d76beef99c3bcd01d0c446786268a90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a1d76beef99c3bcd01d0c446786268a90">win32_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:a1988dcead9c46832b364a360aee19910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a1988dcead9c46832b364a360aee19910">pthreads_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:a742abd4a585a10db48956500e952ff30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a742abd4a585a10db48956500e952ff30">netware_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:ad69892c561e99fbf223bf167923a8c33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ad69892c561e99fbf223bf167923a8c33">beos_locking_callback</a> (int mode, int <a class="el" href="x509_8h.html#ab512b8f495325c7ea0f5a5a5d3f938eb">type</a>, const char *<a class="el" href="conf_8h.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, int line)</td></tr>
<tr class="memitem:abb64b036f49bdbcf83bb7514e6fcd8e8"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#abb64b036f49bdbcf83bb7514e6fcd8e8">irix_thread_id</a> (void)</td></tr>
<tr class="memitem:a876bff3a95e8cd2e56e246f0f1ea9c96"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a876bff3a95e8cd2e56e246f0f1ea9c96">solaris_thread_id</a> (void)</td></tr>
<tr class="memitem:ae99ce9a2d1dde5fe4369c94902d4330d"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#ae99ce9a2d1dde5fe4369c94902d4330d">pthreads_thread_id</a> (void)</td></tr>
<tr class="memitem:a0e9ab5e13e407f74de0da3fe327419a5"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a0e9ab5e13e407f74de0da3fe327419a5">netware_thread_id</a> (void)</td></tr>
<tr class="memitem:aa9eba4f047e738c1584d123852b8f49e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#aa9eba4f047e738c1584d123852b8f49e">beos_thread_id</a> (void)</td></tr>
<tr class="memitem:a8084abcdb4bac3c6403083c649ee3780"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a8084abcdb4bac3c6403083c649ee3780">doit</a> (char *ctx[4])</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memitem:abff9723047fa998892ae57c0937ff133"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#abff9723047fa998892ae57c0937ff133">ndoit</a> (<a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *ssl_ctx[2])</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4903f4ea946648d18bd6a32f4fd35361"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bio_8h.html#af3fabae1c9af50b9312cdff41e11d1dd">BIO</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a4903f4ea946648d18bd6a32f4fd35361">bio_err</a> = <a class="el" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a></td></tr>
<tr class="memitem:a3f20235a073433a5c14aa7ba64bac021"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bio_8h.html#af3fabae1c9af50b9312cdff41e11d1dd">BIO</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a3f20235a073433a5c14aa7ba64bac021">bio_stdout</a> = <a class="el" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a></td></tr>
<tr class="memitem:a0b2caeb4b6f130be43e5a2f0267dd453"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> = 0</td></tr>
<tr class="memitem:a79964331ea0abd5031dabd91ce5d0919"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a> = 10</td></tr>
<tr class="memitem:a415f7541e3f9980f7773c4de7b2a7c21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a415f7541e3f9980f7773c4de7b2a7c21">number_of_loops</a> = 10</td></tr>
<tr class="memitem:a393acc14f46d5641c82092e8469e63b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a393acc14f46d5641c82092e8469e63b3">reconnect</a> = 0</td></tr>
<tr class="memitem:a9b8e93d5c08fd903c1858c31ad0f5597"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mttest_8c.html#a9b8e93d5c08fd903c1858c31ad0f5597">cache_stats</a> = 0</td></tr>
</table>
<h2>Macro Definition Documentation</h2>
<a class="anchor" id="ad0902f8ffbb42de52c29eeb49d9feb79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define C_DONE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00367">367</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3ccd9d8970c512a88885abbf5d71c6e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_THREAD_NUMBER&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00108">108</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="aab10c0491d9394742cfc4d3678f3df9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define S_DONE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00368">368</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa97427fae9f41dc0c45ea080a94f194a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_CLIENT_CERT&#160;&#160;&#160;&quot;../../apps/client.pem&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00105">105</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a73c8b76941fd149157f3b5bd1bac0fe8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_SERVER_CERT&#160;&#160;&#160;&quot;../../apps/server.pem&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00104">104</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a90b7a8cb7bc3fdbd98014a3e15ee6e9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THREAD_STACK_SIZE&#160;&#160;&#160;(16*1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00720">720</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae423f73e281c4ae253c7894532ce3276"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_READ&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00365">365</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4a4c8e2d9accdce696a8cc5ea111f6ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_WRITE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00366">366</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="ad69892c561e99fbf223bf167923a8c33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void beos_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa9eba4f047e738c1584d123852b8f49e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long beos_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af39c30a981df36b29206d93224c12dc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_threads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *&#160;</td>
          <td class="paramname"><em>s_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *&#160;</td>
          <td class="paramname"><em>c_ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8084abcdb4bac3c6403083c649ee3780"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int doit </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ctx</em>[4]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00419">419</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>
<div class="fragment"><div class="line">        {</div>
<div class="line">        <a class="code" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *s_ctx,*c_ctx;</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">char</span> cbuf[200],sbuf[200];</div>
<div class="line">        <a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *c_ssl=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *s_ssl=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="structbio__st.html">BIO</a> *c_to_s=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="structbio__st.html">BIO</a> *s_to_c=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="structbio__st.html">BIO</a> *c_bio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="structbio__st.html">BIO</a> *s_bio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <span class="keywordtype">int</span> c_r,c_w,s_r,s_w;</div>
<div class="line">        <span class="keywordtype">int</span> c_want,s_want;</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordtype">int</span> done=0;</div>
<div class="line">        <span class="keywordtype">int</span> c_write,s_write;</div>
<div class="line">        <span class="keywordtype">int</span> do_server=0,do_client=0;</div>
<div class="line"></div>
<div class="line">        s_ctx=(<a class="code" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *)ctx[0];</div>
<div class="line">        c_ctx=(<a class="code" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *)ctx[1];</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (ctx[2] != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                s_ssl=(<a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *)ctx[2];</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">                s_ssl=SSL_new(s_ctx);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (ctx[3] != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                c_ssl=(<a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *)ctx[3];</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">                c_ssl=SSL_new(c_ctx);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ((s_ssl == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) || (c_ssl == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)) <span class="keywordflow">goto</span> err;</div>
<div class="line"></div>
<div class="line">        c_to_s=<a class="code" href="bio_8h.html#a581a4f51e785ab7df2d032d38f589259">BIO_new</a>(<a class="code" href="bio_8h.html#aa00c1ff95f6d83e358d2daa6eca3e724">BIO_s_mem</a>());</div>
<div class="line">        s_to_c=<a class="code" href="bio_8h.html#a581a4f51e785ab7df2d032d38f589259">BIO_new</a>(<a class="code" href="bio_8h.html#aa00c1ff95f6d83e358d2daa6eca3e724">BIO_s_mem</a>());</div>
<div class="line">        <span class="keywordflow">if</span> ((s_to_c == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) || (c_to_s == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)) <span class="keywordflow">goto</span> err;</div>
<div class="line"></div>
<div class="line">        c_bio=<a class="code" href="bio_8h.html#a581a4f51e785ab7df2d032d38f589259">BIO_new</a>(BIO_f_ssl());</div>
<div class="line">        s_bio=<a class="code" href="bio_8h.html#a581a4f51e785ab7df2d032d38f589259">BIO_new</a>(BIO_f_ssl());</div>
<div class="line">        <span class="keywordflow">if</span> ((c_bio == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) || (s_bio == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)) <span class="keywordflow">goto</span> err;</div>
<div class="line"></div>
<div class="line">        SSL_set_connect_state(c_ssl);</div>
<div class="line">        SSL_set_bio(c_ssl,s_to_c,c_to_s);</div>
<div class="line">        <a class="code" href="bio_8h.html#a5f53f2fec09e92da72189e5048f0c402">BIO_set_ssl</a>(c_bio,c_ssl,(ctx[2] == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)?<a class="code" href="bio_8h.html#ae2a841c93a024bdb42c4e767e62f8970">BIO_CLOSE</a>:<a class="code" href="bio_8h.html#a1a7b8e855fc9a5c077b9da272c870517">BIO_NOCLOSE</a>);</div>
<div class="line"></div>
<div class="line">        SSL_set_accept_state(s_ssl);</div>
<div class="line">        SSL_set_bio(s_ssl,c_to_s,s_to_c);</div>
<div class="line">        <a class="code" href="bio_8h.html#a5f53f2fec09e92da72189e5048f0c402">BIO_set_ssl</a>(s_bio,s_ssl,(ctx[3] == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)?<a class="code" href="bio_8h.html#ae2a841c93a024bdb42c4e767e62f8970">BIO_CLOSE</a>:<a class="code" href="bio_8h.html#a1a7b8e855fc9a5c077b9da272c870517">BIO_NOCLOSE</a>);</div>
<div class="line"></div>
<div class="line">        c_r=0; s_r=1;</div>
<div class="line">        c_w=1; s_w=0;</div>
<div class="line">        c_want=<a class="code" href="mttest_8c.html#a4a4c8e2d9accdce696a8cc5ea111f6ae">W_WRITE</a>;</div>
<div class="line">        s_want=0;</div>
<div class="line">        c_write=1,s_write=0;</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* We can always do writes */</span></div>
<div class="line">        <span class="keywordflow">for</span> (;;)</div>
<div class="line">                {</div>
<div class="line">                do_server=0;</div>
<div class="line">                do_client=0;</div>
<div class="line"></div>
<div class="line">                i=(int)<a class="code" href="bio_8h.html#a3f72e488548e61a7a8d6ababe51a775d">BIO_pending</a>(s_bio);</div>
<div class="line">                <span class="keywordflow">if</span> ((i &amp;&amp; s_r) || s_w) do_server=1;</div>
<div class="line"></div>
<div class="line">                i=(int)<a class="code" href="bio_8h.html#a3f72e488548e61a7a8d6ababe51a775d">BIO_pending</a>(c_bio);</div>
<div class="line">                <span class="keywordflow">if</span> ((i &amp;&amp; c_r) || c_w) do_client=1;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (do_server &amp;&amp; <a class="code" href="mttest_8c.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (SSL_in_init(s_ssl))</div>
<div class="line">                                printf(<span class="stringliteral">&quot;server waiting in SSL_accept - %s\n&quot;</span>,</div>
<div class="line">                                        SSL_state_string_long(s_ssl));</div>
<div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s_write)</div>
<div class="line">                                printf(<span class="stringliteral">&quot;server:SSL_write()\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">else</span> </div>
<div class="line">                                printf(<span class="stringliteral">&quot;server:SSL_read()\n&quot;</span>);</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (do_client &amp;&amp; <a class="code" href="mttest_8c.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a>)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (SSL_in_init(c_ssl))</div>
<div class="line">                                printf(<span class="stringliteral">&quot;client waiting in SSL_connect - %s\n&quot;</span>,</div>
<div class="line">                                        SSL_state_string_long(c_ssl));</div>
<div class="line">                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_write)</div>
<div class="line">                                printf(<span class="stringliteral">&quot;client:SSL_write()\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                printf(<span class="stringliteral">&quot;client:SSL_read()\n&quot;</span>);</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (!do_client &amp;&amp; !do_server)</div>
<div class="line">                        {</div>
<div class="line">                        fprintf(stdout,<span class="stringliteral">&quot;ERROR IN STARTUP\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">if</span> (do_client &amp;&amp; !(done &amp; <a class="code" href="mttest_8c.html#ad0902f8ffbb42de52c29eeb49d9feb79">C_DONE</a>))</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (c_write)</div>
<div class="line">                                {</div>
<div class="line">                                i=<a class="code" href="bio_8h.html#a7b4c64ffdc342154cf923744210a8429">BIO_write</a>(c_bio,<span class="stringliteral">&quot;hello from client\n&quot;</span>,18);</div>
<div class="line">                                <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        c_r=0;</div>
<div class="line">                                        c_w=0;</div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#aa05961c55a37bf6e3ab7bfc8be2ea30c">BIO_should_retry</a>(c_bio))</div>
<div class="line">                                                {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#a138d033ea0cf997d506afff5e668b071">BIO_should_read</a>(c_bio))</div>
<div class="line">                                                        c_r=1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#ac60ffc29a3b9f9d36818cc4ad4cc42ff">BIO_should_write</a>(c_bio))</div>
<div class="line">                                                        c_w=1;</div>
<div class="line">                                                }</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                {</div>
<div class="line">                                                fprintf(stderr,<span class="stringliteral">&quot;ERROR in CLIENT\n&quot;</span>);</div>
<div class="line">                                                <a class="code" href="err_8h.html#ae677e395b09f61df20dd6ed7a89c8a2c">ERR_print_errors_fp</a>(stderr);</div>
<div class="line">                                                <span class="keywordflow">return</span>(1);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        fprintf(stderr,<span class="stringliteral">&quot;SSL CLIENT STARTUP FAILED\n&quot;</span>);</div>
<div class="line">                                        <span class="keywordflow">return</span>(1);</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        {</div>
<div class="line">                                        <span class="comment">/* ok */</span></div>
<div class="line">                                        c_write=0;</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                {</div>
<div class="line">                                i=<a class="code" href="bio_8h.html#aa9c073049884e4f84d442529a7f14861">BIO_read</a>(c_bio,cbuf,100);</div>
<div class="line">                                <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        c_r=0;</div>
<div class="line">                                        c_w=0;</div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#aa05961c55a37bf6e3ab7bfc8be2ea30c">BIO_should_retry</a>(c_bio))</div>
<div class="line">                                                {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#a138d033ea0cf997d506afff5e668b071">BIO_should_read</a>(c_bio))</div>
<div class="line">                                                        c_r=1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#ac60ffc29a3b9f9d36818cc4ad4cc42ff">BIO_should_write</a>(c_bio))</div>
<div class="line">                                                        c_w=1;</div>
<div class="line">                                                }</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                {</div>
<div class="line">                                                fprintf(stderr,<span class="stringliteral">&quot;ERROR in CLIENT\n&quot;</span>);</div>
<div class="line">                                                <a class="code" href="err_8h.html#ae677e395b09f61df20dd6ed7a89c8a2c">ERR_print_errors_fp</a>(stderr);</div>
<div class="line">                                                <span class="keywordflow">return</span>(1);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        fprintf(stderr,<span class="stringliteral">&quot;SSL CLIENT STARTUP FAILED\n&quot;</span>);</div>
<div class="line">                                        <span class="keywordflow">return</span>(1);</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        {</div>
<div class="line">                                        done|=<a class="code" href="mttest_8c.html#ad0902f8ffbb42de52c29eeb49d9feb79">C_DONE</a>;</div>
<div class="line"><span class="preprocessor">#ifdef undef</span></div>
<div class="line"><span class="preprocessor"></span>                                        fprintf(stdout,<span class="stringliteral">&quot;CLIENT:from server:&quot;</span>);</div>
<div class="line">                                        fwrite(cbuf,1,i,stdout);</div>
<div class="line">                                        fflush(stdout);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (do_server &amp;&amp; !(done &amp; <a class="code" href="mttest_8c.html#aab10c0491d9394742cfc4d3678f3df9d">S_DONE</a>))</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (!s_write)</div>
<div class="line">                                {</div>
<div class="line">                                i=<a class="code" href="bio_8h.html#aa9c073049884e4f84d442529a7f14861">BIO_read</a>(s_bio,sbuf,100);</div>
<div class="line">                                <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        s_r=0;</div>
<div class="line">                                        s_w=0;</div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#aa05961c55a37bf6e3ab7bfc8be2ea30c">BIO_should_retry</a>(s_bio))</div>
<div class="line">                                                {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#a138d033ea0cf997d506afff5e668b071">BIO_should_read</a>(s_bio))</div>
<div class="line">                                                        s_r=1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#ac60ffc29a3b9f9d36818cc4ad4cc42ff">BIO_should_write</a>(s_bio))</div>
<div class="line">                                                        s_w=1;</div>
<div class="line">                                                }</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                {</div>
<div class="line">                                                fprintf(stderr,<span class="stringliteral">&quot;ERROR in SERVER\n&quot;</span>);</div>
<div class="line">                                                <a class="code" href="err_8h.html#ae677e395b09f61df20dd6ed7a89c8a2c">ERR_print_errors_fp</a>(stderr);</div>
<div class="line">                                                <span class="keywordflow">return</span>(1);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        fprintf(stderr,<span class="stringliteral">&quot;SSL SERVER STARTUP FAILED\n&quot;</span>);</div>
<div class="line">                                        <span class="keywordflow">return</span>(1);</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        {</div>
<div class="line">                                        s_write=1;</div>
<div class="line">                                        s_w=1;</div>
<div class="line"><span class="preprocessor">#ifdef undef</span></div>
<div class="line"><span class="preprocessor"></span>                                        fprintf(stdout,<span class="stringliteral">&quot;SERVER:from client:&quot;</span>);</div>
<div class="line">                                        fwrite(sbuf,1,i,stdout);</div>
<div class="line">                                        fflush(stdout);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        }</div>
<div class="line">                                }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                {</div>
<div class="line">                                i=<a class="code" href="bio_8h.html#a7b4c64ffdc342154cf923744210a8429">BIO_write</a>(s_bio,<span class="stringliteral">&quot;hello from server\n&quot;</span>,18);</div>
<div class="line">                                <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        s_r=0;</div>
<div class="line">                                        s_w=0;</div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#aa05961c55a37bf6e3ab7bfc8be2ea30c">BIO_should_retry</a>(s_bio))</div>
<div class="line">                                                {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#a138d033ea0cf997d506afff5e668b071">BIO_should_read</a>(s_bio))</div>
<div class="line">                                                        s_r=1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="bio_8h.html#ac60ffc29a3b9f9d36818cc4ad4cc42ff">BIO_should_write</a>(s_bio))</div>
<div class="line">                                                        s_w=1;</div>
<div class="line">                                                }</div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line">                                                {</div>
<div class="line">                                                fprintf(stderr,<span class="stringliteral">&quot;ERROR in SERVER\n&quot;</span>);</div>
<div class="line">                                                <a class="code" href="err_8h.html#ae677e395b09f61df20dd6ed7a89c8a2c">ERR_print_errors_fp</a>(stderr);</div>
<div class="line">                                                <span class="keywordflow">return</span>(1);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 0)</div>
<div class="line">                                        {</div>
<div class="line">                                        fprintf(stderr,<span class="stringliteral">&quot;SSL SERVER STARTUP FAILED\n&quot;</span>);</div>
<div class="line">                                        <span class="keywordflow">return</span>(1);</div>
<div class="line">                                        }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                        {</div>
<div class="line">                                        s_write=0;</div>
<div class="line">                                        s_r=1;</div>
<div class="line">                                        done|=<a class="code" href="mttest_8c.html#aab10c0491d9394742cfc4d3678f3df9d">S_DONE</a>;</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> ((done &amp; S_DONE) &amp;&amp; (done &amp; C_DONE)) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="preprocessor">#   if defined(OPENSSL_SYS_NETWARE)</span></div>
<div class="line"><span class="preprocessor"></span>        ThreadSwitchWithDelay();</div>
<div class="line"><span class="preprocessor">#   endif</span></div>
<div class="line"><span class="preprocessor"></span>                }</div>
<div class="line"></div>
<div class="line">        SSL_set_shutdown(c_ssl,SSL_SENT_SHUTDOWN|SSL_RECEIVED_SHUTDOWN);</div>
<div class="line">        SSL_set_shutdown(s_ssl,SSL_SENT_SHUTDOWN|SSL_RECEIVED_SHUTDOWN);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef undef</span></div>
<div class="line"><span class="preprocessor"></span>        fprintf(stdout,<span class="stringliteral">&quot;DONE\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>err:</div>
<div class="line">        <span class="comment">/* We have to set the BIO&#39;s to NULL otherwise they will be</span></div>
<div class="line"><span class="comment">         * free()ed twice.  Once when th s_ssl is SSL_free()ed and</span></div>
<div class="line"><span class="comment">         * again when c_ssl is SSL_free()ed.</span></div>
<div class="line"><span class="comment">         * This is a hack required because s_ssl and c_ssl are sharing the same</span></div>
<div class="line"><span class="comment">         * BIO structure and SSL_set_bio() and SSL_free() automatically</span></div>
<div class="line"><span class="comment">         * BIO_free non NULL entries.</span></div>
<div class="line"><span class="comment">         * You should not normally do this or be required to do this */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (s_ssl != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                {</div>
<div class="line">                s_ssl-&gt;rbio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                s_ssl-&gt;wbio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">if</span> (c_ssl != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                {</div>
<div class="line">                c_ssl-&gt;rbio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                c_ssl-&gt;wbio=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* The SSL&#39;s are optionally freed in the following calls */</span></div>
<div class="line">        <span class="keywordflow">if</span> (c_to_s != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) <a class="code" href="bio_8h.html#abbfb67b5eb998ce232f2482b097da8b2">BIO_free</a>(c_to_s);</div>
<div class="line">        <span class="keywordflow">if</span> (s_to_c != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) <a class="code" href="bio_8h.html#abbfb67b5eb998ce232f2482b097da8b2">BIO_free</a>(s_to_c);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (c_bio != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) <a class="code" href="bio_8h.html#abbfb67b5eb998ce232f2482b097da8b2">BIO_free</a>(c_bio);</div>
<div class="line">        <span class="keywordflow">if</span> (s_bio != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) <a class="code" href="bio_8h.html#abbfb67b5eb998ce232f2482b097da8b2">BIO_free</a>(s_bio);</div>
<div class="line">        <span class="keywordflow">return</span>(0);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad3ec08c233542c8d4720c326e472c69c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irix_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abb64b036f49bdbcf83bb7514e6fcd8e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long irix_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00186">186</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>
<div class="fragment"><div class="line">        {</div>
<div class="line">        <span class="keywordtype">char</span> *CApath=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>,*CAfile=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <span class="keywordtype">int</span> badop=0;</div>
<div class="line">        <span class="keywordtype">int</span> ret=1;</div>
<div class="line">        <span class="keywordtype">int</span> client_auth=0;</div>
<div class="line">        <span class="keywordtype">int</span> server_auth=0;</div>
<div class="line">        <a class="code" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *s_ctx=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <a class="code" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *c_ctx=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">        <span class="keywordtype">char</span> *scert=<a class="code" href="mttest_8c.html#a73c8b76941fd149157f3b5bd1bac0fe8">TEST_SERVER_CERT</a>;</div>
<div class="line">        <span class="keywordtype">char</span> *ccert=<a class="code" href="mttest_8c.html#aa97427fae9f41dc0c45ea080a94f194a">TEST_CLIENT_CERT</a>;</div>
<div class="line">        SSL_METHOD *ssl_method=SSLv23_method();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="rand_8h.html#af0cae512f02d66a76b34935a82fa44c7">RAND_seed</a>(rnd_seed, <span class="keyword">sizeof</span> rnd_seed);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (bio_err == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                <a class="code" href="dec_8c.html#a4903f4ea946648d18bd6a32f4fd35361">bio_err</a>=<a class="code" href="bio_8h.html#aa9d8fee81d8c404f89565289567c22d7">BIO_new_fp</a>(stderr,<a class="code" href="bio_8h.html#a1a7b8e855fc9a5c077b9da272c870517">BIO_NOCLOSE</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a3f20235a073433a5c14aa7ba64bac021">bio_stdout</a> == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                <a class="code" href="mttest_8c.html#a3f20235a073433a5c14aa7ba64bac021">bio_stdout</a>=<a class="code" href="bio_8h.html#aa9d8fee81d8c404f89565289567c22d7">BIO_new_fp</a>(stdout,<a class="code" href="bio_8h.html#a1a7b8e855fc9a5c077b9da272c870517">BIO_NOCLOSE</a>);</div>
<div class="line">        argc--;</div>
<div class="line">        argv++;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span> (argc &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">if</span>      (strcmp(*argv,<span class="stringliteral">&quot;-server_auth&quot;</span>) == 0)</div>
<div class="line">                        server_auth=1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-client_auth&quot;</span>) == 0)</div>
<div class="line">                        client_auth=1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-reconnect&quot;</span>) == 0)</div>
<div class="line">                        <a class="code" href="mttest_8c.html#a393acc14f46d5641c82092e8469e63b3">reconnect</a>=1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-stats&quot;</span>) == 0)</div>
<div class="line">                        <a class="code" href="mttest_8c.html#a9b8e93d5c08fd903c1858c31ad0f5597">cache_stats</a>=1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-ssl3&quot;</span>) == 0)</div>
<div class="line">                        ssl_method=SSLv3_method();</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-ssl2&quot;</span>) == 0)</div>
<div class="line">                        ssl_method=SSLv2_method();</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-CApath&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        CApath= *(++argv);</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-CAfile&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        CAfile= *(++argv);</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-cert&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        scert= *(++argv);</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-ccert&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        ccert= *(++argv);</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-threads&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        <a class="code" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a>= atoi(*(++argv));</div>
<div class="line">                        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a> == 0) <a class="code" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a>=1;</div>
<div class="line">                        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a> &gt; <a class="code" href="mttest_8c.html#a3ccd9d8970c512a88885abbf5d71c6e0">MAX_THREAD_NUMBER</a>)</div>
<div class="line">                                <a class="code" href="mttest_8c.html#a79964331ea0abd5031dabd91ce5d0919">thread_number</a>=<a class="code" href="mttest_8c.html#a3ccd9d8970c512a88885abbf5d71c6e0">MAX_THREAD_NUMBER</a>;</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(*argv,<span class="stringliteral">&quot;-loops&quot;</span>) == 0)</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">if</span> (--argc &lt; 1) <span class="keywordflow">goto</span> bad;</div>
<div class="line">                        <a class="code" href="mttest_8c.html#a415f7541e3f9980f7773c4de7b2a7c21">number_of_loops</a>= atoi(*(++argv));</div>
<div class="line">                        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a415f7541e3f9980f7773c4de7b2a7c21">number_of_loops</a> == 0) <a class="code" href="mttest_8c.html#a415f7541e3f9980f7773c4de7b2a7c21">number_of_loops</a>=1;</div>
<div class="line">                        }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                        fprintf(stderr,<span class="stringliteral">&quot;unknown option %s\n&quot;</span>,*argv);</div>
<div class="line">                        badop=1;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                argc--;</div>
<div class="line">                argv++;</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">if</span> (badop)</div>
<div class="line">                {</div>
<div class="line">bad:</div>
<div class="line">                sv_usage();</div>
<div class="line">                <span class="keywordflow">goto</span> end;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (cipher == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a> &amp;&amp; <a class="code" href="crypto_8h.html#acd6c4ab3f6cbf9cc93af4d9a62549359">OPENSSL_issetugid</a>() == 0)</div>
<div class="line">                cipher=getenv(<span class="stringliteral">&quot;SSL_CIPHER&quot;</span>);</div>
<div class="line"></div>
<div class="line">        SSL_load_error_strings();</div>
<div class="line">        OpenSSL_add_ssl_algorithms();</div>
<div class="line"></div>
<div class="line">        c_ctx=SSL_CTX_new(ssl_method);</div>
<div class="line">        s_ctx=SSL_CTX_new(ssl_method);</div>
<div class="line">        <span class="keywordflow">if</span> ((c_ctx == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) || (s_ctx == <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>))</div>
<div class="line">                {</div>
<div class="line">                <a class="code" href="err_8h.html#a7acfad1722fbc676a207323d785b61aa">ERR_print_errors</a>(bio_err);</div>
<div class="line">                <span class="keywordflow">goto</span> end;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        SSL_CTX_set_session_cache_mode(s_ctx,</div>
<div class="line">                SSL_SESS_CACHE_NO_AUTO_CLEAR|SSL_SESS_CACHE_SERVER);</div>
<div class="line">        SSL_CTX_set_session_cache_mode(c_ctx,</div>
<div class="line">                SSL_SESS_CACHE_NO_AUTO_CLEAR|SSL_SESS_CACHE_SERVER);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!SSL_CTX_use_certificate_file(s_ctx,scert,SSL_FILETYPE_PEM))</div>
<div class="line">                {</div>
<div class="line">                <a class="code" href="err_8h.html#a7acfad1722fbc676a207323d785b61aa">ERR_print_errors</a>(bio_err);</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!SSL_CTX_use_RSAPrivateKey_file(s_ctx,scert,SSL_FILETYPE_PEM))</div>
<div class="line">                {</div>
<div class="line">                <a class="code" href="err_8h.html#a7acfad1722fbc676a207323d785b61aa">ERR_print_errors</a>(bio_err);</div>
<div class="line">                <span class="keywordflow">goto</span> end;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (client_auth)</div>
<div class="line">                {</div>
<div class="line">                SSL_CTX_use_certificate_file(c_ctx,ccert,</div>
<div class="line">                        SSL_FILETYPE_PEM);</div>
<div class="line">                SSL_CTX_use_RSAPrivateKey_file(c_ctx,ccert,</div>
<div class="line">                        SSL_FILETYPE_PEM);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (    (!SSL_CTX_load_verify_locations(s_ctx,CAfile,CApath)) ||</div>
<div class="line">                (!SSL_CTX_set_default_verify_paths(s_ctx)) ||</div>
<div class="line">                (!SSL_CTX_load_verify_locations(c_ctx,CAfile,CApath)) ||</div>
<div class="line">                (!SSL_CTX_set_default_verify_paths(c_ctx)))</div>
<div class="line">                {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;SSL_load_verify_locations\n&quot;</span>);</div>
<div class="line">                <a class="code" href="err_8h.html#a7acfad1722fbc676a207323d785b61aa">ERR_print_errors</a>(bio_err);</div>
<div class="line">                <span class="keywordflow">goto</span> end;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (client_auth)</div>
<div class="line">                {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;client authentication\n&quot;</span>);</div>
<div class="line">                SSL_CTX_set_verify(s_ctx,</div>
<div class="line">                        SSL_VERIFY_PEER|SSL_VERIFY_FAIL_IF_NO_PEER_CERT,</div>
<div class="line">                        <a class="code" href="dec_8c.html#aed10b9c7798cabd62a85193938f2726a">verify_callback</a>);</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">if</span> (server_auth)</div>
<div class="line">                {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;server authentication\n&quot;</span>);</div>
<div class="line">                SSL_CTX_set_verify(c_ctx,SSL_VERIFY_PEER,</div>
<div class="line">                        <a class="code" href="dec_8c.html#aed10b9c7798cabd62a85193938f2726a">verify_callback</a>);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="mttest_8c.html#a970ba88e9a098add36d0f4eb5b7583b6">thread_setup</a>();</div>
<div class="line">        <a class="code" href="mttest_8c.html#af39c30a981df36b29206d93224c12dc1">do_threads</a>(s_ctx,c_ctx);</div>
<div class="line">        <a class="code" href="mttest_8c.html#a16fa70526b1e82066ff7fc24595019d1">thread_cleanup</a>();</div>
<div class="line">end:</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (c_ctx != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>) </div>
<div class="line">                {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;Client SSL_CTX stats then free it\n&quot;</span>);</div>
<div class="line">                print_stats(stderr,c_ctx);</div>
<div class="line">                SSL_CTX_free(c_ctx);</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">if</span> (s_ctx != <a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>)</div>
<div class="line">                {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;Server SSL_CTX stats then free it\n&quot;</span>);</div>
<div class="line">                print_stats(stderr,s_ctx);</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a9b8e93d5c08fd903c1858c31ad0f5597">cache_stats</a>)</div>
<div class="line">                        {</div>
<div class="line">                        fprintf(stderr,<span class="stringliteral">&quot;-----\n&quot;</span>);</div>
<div class="line">                        <a class="code" href="lh__stats_8c.html#a1b6c9703952f8c2b25f37191f05aca8b">lh_stats</a>(SSL_CTX_sessions(s_ctx),stderr);</div>
<div class="line">                        fprintf(stderr,<span class="stringliteral">&quot;-----\n&quot;</span>);</div>
<div class="line">                <span class="comment">/*      lh_node_stats(SSL_CTX_sessions(s_ctx),stderr);</span></div>
<div class="line"><span class="comment">                        fprintf(stderr,&quot;-----\n&quot;); */</span></div>
<div class="line">                        <a class="code" href="lh__stats_8c.html#ad3d264fc2739f95a5bfb441c6f516532">lh_node_usage_stats</a>(SSL_CTX_sessions(s_ctx),stderr);</div>
<div class="line">                        fprintf(stderr,<span class="stringliteral">&quot;-----\n&quot;</span>);</div>
<div class="line">                        }</div>
<div class="line">                SSL_CTX_free(s_ctx);</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;done free\n&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">        <a class="code" href="md2_8c.html#a6f255d924f7a6bb2c4be0c8c2f2d9ce3">exit</a>(ret);</div>
<div class="line">        <span class="keywordflow">return</span>(0);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abff9723047fa998892ae57c0937ff133"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ndoit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ossl__typ_8h.html#a1a21892c1193ee6eb572c2c72d3924ca">SSL_CTX</a> *&#160;</td>
          <td class="paramname"><em>ssl_ctx</em>[2]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00370">370</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>
<div class="fragment"><div class="line">        {</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordtype">int</span> ret;</div>
<div class="line">        <span class="keywordtype">char</span> *ctx[4];</div>
<div class="line"></div>
<div class="line">        ctx[0]=(<span class="keywordtype">char</span> *)ssl_ctx[0];</div>
<div class="line">        ctx[1]=(<span class="keywordtype">char</span> *)ssl_ctx[1];</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a393acc14f46d5641c82092e8469e63b3">reconnect</a>)</div>
<div class="line">                {</div>
<div class="line">                ctx[2]=(<span class="keywordtype">char</span> *)SSL_new(ssl_ctx[0]);</div>
<div class="line">                ctx[3]=(<span class="keywordtype">char</span> *)SSL_new(ssl_ctx[1]);</div>
<div class="line">                }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                ctx[2]=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                ctx[3]=<a class="code" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">        fprintf(stdout,<span class="stringliteral">&quot;started thread %lu\n&quot;</span>,<a class="code" href="crypto_8h.html#ae0a90746c99716c84812001d1a9f4058">CRYPTO_thread_id</a>());</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="mttest_8c.html#a415f7541e3f9980f7773c4de7b2a7c21">number_of_loops</a>; i++)</div>
<div class="line">                {</div>
<div class="line"><span class="comment">/*              fprintf(stderr,&quot;%4d %2d ctx-&gt;ref (%3d,%3d)\n&quot;,</span></div>
<div class="line"><span class="comment">                        CRYPTO_thread_id(),i,</span></div>
<div class="line"><span class="comment">                        ssl_ctx[0]-&gt;references,</span></div>
<div class="line"><span class="comment">                        ssl_ctx[1]-&gt;references); */</span></div>
<div class="line">        <span class="comment">/*      pthread_delay_np(&amp;tm);*/</span></div>
<div class="line"></div>
<div class="line">                ret=<a class="code" href="mttest_8c.html#a8084abcdb4bac3c6403083c649ee3780">doit</a>(ctx);</div>
<div class="line">                <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">                        {</div>
<div class="line">                        fprintf(stdout,<span class="stringliteral">&quot;error[%d] %lu - %d\n&quot;</span>,</div>
<div class="line">                                i,<a class="code" href="crypto_8h.html#ae0a90746c99716c84812001d1a9f4058">CRYPTO_thread_id</a>(),ret);</div>
<div class="line">                        <span class="keywordflow">return</span>(ret);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        fprintf(stdout,<span class="stringliteral">&quot;DONE %lu\n&quot;</span>,<a class="code" href="crypto_8h.html#ae0a90746c99716c84812001d1a9f4058">CRYPTO_thread_id</a>());</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="mttest_8c.html#a393acc14f46d5641c82092e8469e63b3">reconnect</a>)</div>
<div class="line">                {</div>
<div class="line">                SSL_free((<a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *)ctx[2]);</div>
<div class="line">                SSL_free((<a class="code" href="ossl__typ_8h.html#a71f21e09bf365489dab9d85bd4785e24">SSL</a> *)ctx[3]);</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#   ifdef OPENSSL_SYS_NETWARE</span></div>
<div class="line"><span class="preprocessor"></span>        MPKSemaphoreSignal(ThreadSem);</div>
<div class="line"><span class="preprocessor">#   endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">return</span>(0);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a742abd4a585a10db48956500e952ff30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void netware_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0e9ab5e13e407f74de0da3fe327419a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long netware_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1988dcead9c46832b364a360aee19910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pthreads_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae99ce9a2d1dde5fe4369c94902d4330d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long pthreads_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2f6ea939906b88c77d91c01fb2f0e8fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void solaris_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a876bff3a95e8cd2e56e246f0f1ea9c96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long solaris_thread_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a16fa70526b1e82066ff7fc24595019d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a970ba88e9a098add36d0f4eb5b7583b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thread_setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac0ab5d16914b8b8094ce1e47254e57d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="ecdhtest_8c.html#a9bf82f2bf6a77e81125eeaa7ee405322">MS_CALLBACK</a> verify_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ok</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ossl__typ_8h.html#ae681945a2cf88d6337137dc0260a1545">X509_STORE_CTX</a> *&#160;</td>
          <td class="paramname"><em>xs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d76beef99c3bcd01d0c446786268a90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void win32_locking_callback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2>Variable Documentation</h2>
<a class="anchor" id="a4903f4ea946648d18bd6a32f4fd35361"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bio_8h.html#af3fabae1c9af50b9312cdff41e11d1dd">BIO</a>* bio_err = <a class="el" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00134">134</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3f20235a073433a5c14aa7ba64bac021"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bio_8h.html#af3fabae1c9af50b9312cdff41e11d1dd">BIO</a>* bio_stdout = <a class="el" href="e__des3_8c.html#abd96bf38ecc88042908f20aa5e5752cc">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00135">135</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9b8e93d5c08fd903c1858c31ad0f5597"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cache_stats = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00146">146</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a415f7541e3f9980f7773c4de7b2a7c21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int number_of_loops = 10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00144">144</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a393acc14f46d5641c82092e8469e63b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int reconnect = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00145">145</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a79964331ea0abd5031dabd91ce5d0919"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thread_number = 10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00143">143</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0b2caeb4b6f130be43e5a2f0267dd453"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int verbose = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mttest_8c_source.html#l00138">138</a> of file <a class="el" href="mttest_8c_source.html">mttest.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 15 2014 18:16:54 for openssl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
